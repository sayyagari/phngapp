<!DOCTYPE html>
<html>
    <head>
        <title>Acceleration</title>
        
        <script src="jquery.js"></script>
        <script type="text/javascript" src="jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
        <script type="text/javascript" charset="utf-8">
        alert('starting main app');
         (function(){
          alert('before starting');
          var ph = document.getElementById("phone").innerHTML('My telephone number is');
          alert(ph);
      /*  $("#phone").text("My telephone number is: " + 
                window.MyCls.getTelephoneNumber());*/
                alert('after jquery');
      });
      alert('jquery exit');
            // The watch id references the current `watchAcceleration`
            var watchID = null;
            alert('starting');
            //wait for PhoneGap to load
            document.addEventListener("devicereainnerHTMLdy", loaded, false);
            // PhoneGap is ready
            function loaded() {
            alert('loaded');
                startWatch();
            }
            // Start watching the acceleration
            function startWatch() {
            alert('startwatching');
                var previousReading = {
                    x: null,
                    y: null,
                    z: null
                }
                alert( JSON.stringify(previousReading.x));
                navigator.accelerometer.watchAcceleration(function (acceleration) {
                  var changes = {},
                  bound = 0.2;
                  alert('in watch acceleration function' + ' '+ JSON.stringify(acceleration.x) + ' '+  JSON.stringify(acceleration.y) + ' '+ JSON.stringify(acceleration.z));
                //  alert(acceleration);
                  if (previousReading.x !== null) {
                      changes.x = Math.abs(previousReading.x, acceleration.x);
                      changes.y = Math.abs(previousReading.y, acceleration.y);
                      changes.z = Math.abs(previousReading.z, acceleration.z);
                      alert(JSON.stringify(changes.x));
                  }
                  if (changes.x > bound && changes.y > bound && changes.z > bound) {
                    shaken();
                  }
                  previousReading = {
                  x: reading.x,
                  y: reading.y,
                  z: reading.z
                  }
                  }, onError, { frequency: 2000 });
            }
            function shaken(){
                alert("Shaken");
            }
            // Error
            function onError() {
                alert('onError!');
            }
            </script>
    </head>
    <body>
    <div id = 'phone'></div>
    </body>
</html>